@using BlazorApp1.Models;
<CascadingValue Value="this">
    @ChildContent
</CascadingValue>



@code {
    [Parameter] public List<PieceModel> Pieces { get; set; }
    [Parameter] public EventCallback<PieceModel> OnStatusUpdated { get; set; }
    [Parameter] public RenderFragment ChildContent { get; set; }
    public PieceModel Payload { get; set; }



    public async Task UpdatePieceAsync(int[] newPos)
    {
        Payload.Position = newPos;
        var piece = Pieces.FirstOrDefault(p => p.Id == Payload.Id);
        if(piece != null)
        {
            piece.Position = Payload.Position;
        }
        await OnStatusUpdated.InvokeAsync(Payload);
    }
}
